<html>
	<head>
		<title> my web page </title>

		<style type="text/css">
		  body { font-size: 80%; font-family: 'Lucida Grande', Verdana, Arial, Sans-Serif; }
		  ul#tabs { list-style-type: none; margin: 30px 0 0 0; padding: 0 0 0.3em 0; }
		  ul#tabs li { display: inline; }
		  ul#tabs li a { color: #42454a; background-color: #dedbde; border: 1px solid #c9c3ba; border-bottom: none; padding: 0.3em; text-decoration: none; }
		  ul#tabs li a:hover { background-color: #f1f0ee; }
		  ul#tabs li a.selected { color: #000; background-color: #f1f0ee; font-weight: bold; padding: 0.7em 0.3em 0.38em 0.3em; }
		  div.tabContent { border: 1px solid #c9c3ba; padding: 0.5em; background-color: #f1f0ee; }
		  div.tabContent.hide { display: none; }
		</style>
	</head>

	<body onload = "init()">

	<ul id="tabs">
			<li><a href="#tab1">Login</a></li>
			<li><a href="#tab2">New User</a></li>
	</ul>
	 
	<div class="tabContent" id="tab1">
		<FORM NAME ="form1" METHOD ="POST" >
			Username:
			<INPUT TYPE = "Text" VALUE ="" NAME = "username">
			<br>
			Password:
			<INPUT TYPE = "Text" VALUE ="" NAME = "password">
			<br>
			<INPUT TYPE = "button" Name = "Submit1" VALUE = "Login" onclick="login(username.value, password.value)">
			<br>
		</form>
	</div>
 
	<div class="tabContent" id="tab2">
		<FORM NAME ="form2" METHOD ="POST" >
			Username:
			<INPUT TYPE = "Text" VALUE ="" NAME = "newusername">
			<br>
			Password:
			<INPUT TYPE = "Text" VALUE ="" NAME = "newpassword">
			<br>
			E-mail:
			<INPUT TYPE = "Text" VALUE ="" NAME = "newemail">
			<br>
			Phone:
			<INPUT TYPE = "Text" VALUE ="" NAME = "newphone">
			<br>
			<INPUT TYPE = "button" Name = "Submit2" VALUE = "Create User" onclick="create(newusername.value, newpassword.value, newemail.value, newphone.value)">
			<br>
		</form>
	</div>

	<div id = "txtHint"> </div>

	<script type = "text/javascript">
		function login(str, str2) {
			if (str=="") {
				document.getElementById("txtHint").innerHTML="";
				return;	
			} 
			if (window.XMLHttpRequest) {
				// code for IE7+, Firefox, Chrome, Opera, Safari
				xmlhttp=new XMLHttpRequest();
			}
			else {
				// code for IE6, IE5
				xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
			}
			xmlhttp.onreadystatechange=function() {
				if (xmlhttp.readyState==4 && xmlhttp.status==200) {
					if (xmlhttp.responseText == "VALID") {
						alert("Authentication successful!");
						window.location.assign("memedb.php");
					} else if (xmlhttp.responseText == "NOTFOUND") {
						alert("User not found!");
					} else {
						alert("Authentication failed!");
					}
				}
			}
			xmlhttp.open("GET","login.php?username="+str+"&password="+str2,true);
			xmlhttp.send();
		}
		
		function create(username, password, email, phone) {
			if (window.XMLHttpRequest) {
				// code for IE7+, Firefox, Chrome, Opera, Safari
				xmlhttp2=new XMLHttpRequest();
			}
			else {
				// code for IE6, IE5
				xmlhttp2=new ActiveXObject("Microsoft.XMLHTTP");
			}
			xmlhttp2.onreadystatechange=function() {
				if (xmlhttp2.readyState==4 && xmlhttp2.status==200) {
					if (xmlhttp2.responseText == "SUCCESS") {
						alert("User successfully created!");
						window.location.assign("memedb.php");
					} else if (xmlhttp2.responseText == "EXISTS") {
						alert("Username already exists!");
					} else {
			
						alert("Database failure!");
					}
				}
			}
			xmlhttp2.open("GET","newuser.php?username="+username+"&password="+password+"&email="+email+"&phone="+phone,true);
			xmlhttp2.send();
		}
	</script>

	<script type = "text/javascript">

			var tabLinks = new Array();
			var contentDivs = new Array();
	 
			function init() {
				// Grab the tab links and content divs from the page
				var tabListItems = document.getElementById('tabs').childNodes;
				for ( var i = 0; i < tabListItems.length; i++ ) {
					if ( tabListItems[i].nodeName == "LI" ) {
						var tabLink = getFirstChildWithTagName( tabListItems[i], 'A' );
						var id = getHash( tabLink.getAttribute('href') );
						tabLinks[id] = tabLink;
						contentDivs[id] = document.getElementById( id );
					}
				}
				// Assign onclick events to the tab links, and
				// highlight the first tab
				var i = 0;
				for ( var id in tabLinks ) {
					tabLinks[id].onclick = showTab;
					tabLinks[id].onfocus = function() { this.blur() };
					if ( i == 0 ) tabLinks[id].className = 'selected';
						i++;
				}
		 
				// Hide all content divs except the first
				var i = 0;
				for ( var id in contentDivs ) {
					if ( i != 0 ) contentDivs[id].className = 'tabContent hide';
						i++;
				}
			}
	 
			function showTab() {
				var selectedId = getHash( this.getAttribute('href') );
	 
				// Highlight the selected tab, and dim all others.
				// Also show the selected content div, and hide all others.
				for ( var id in contentDivs ) {
					if ( id == selectedId ) {
						tabLinks[id].className = 'selected';
						contentDivs[id].className = 'tabContent';
					} else {
						tabLinks[id].className = '';
						contentDivs[id].className = 'tabContent hide';
					}
				}
	 
			// Stop the browser following the link
				return false;
			}

			function dispTab(selectedId) {
	 
				// Highlight the selected tab, and dim all others.
				// Also show the selected content div, and hide all others.
				for ( var id in contentDivs ) {
					if ( id == selectedId ) {
						tabLinks[id].className = 'selected';
						contentDivs[id].className = 'tabContent';
					} else {
						tabLinks[id].className = '';
						contentDivs[id].className = 'tabContent hide';
					}
				}
	 
			// Stop the browser following the link
				return false;
			}
	 
			function getFirstChildWithTagName( element, tagName ) {
				for ( var i = 0; i < element.childNodes.length; i++ ) {
					if ( element.childNodes[i].nodeName == tagName ) return element.childNodes[i];
				}
			}
	 
			function getHash( url ) {
				var hashPos = url.lastIndexOf ( '#' );
				return url.substring( hashPos + 1 );
			}

	</script>


	</body>

</html>